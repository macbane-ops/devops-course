### Задание 1. Файловые системы

1. **Узнайте о sparse-файлах (разряженных).**  

По умолчанию, разреженные файлы являются специальным форматом представления, в котором часть цифровой последовательности заменена сведениями о ней (сформирован перечень дыр), что в свою очередь позволяет гораздо эффективнее задействовать возможности файловой системы. Информация об отсутствующих последовательностях располагается напрямую в метаданных файловой системы, а не занятый высвободившийся объем запоминающего устройства будет использоваться для записи по мере надобности. Такой подход значительно сокращает объем исходного файла и экономит пространство накопителя.

Преимущества:

    - экономия дискового пространства. Использование разрежённых файлов считается одним из способов сжатия данных на уровне файловой системы;
    - отсутствие временных затрат на запись нулевых байт;
    - увеличение срока службы запоминающих устройств.

Недостатки:

    - накладные расходы на работу со списком дыр;
    - фрагментация файла при частой записи данных в дыры;
    - невозможность записи данных в дыры при отсутствии свободного места на диске;
    - невозможность использования других индикаторов дыр, кроме нулевых байт.  
2. **Могут ли файлы, являющиеся жёсткой ссылкой на один объект, иметь разные права доступа и владельца? Почему?**  

Нет, так как жесткая ссылка и файл, для которой она создавалась имеют одинаковые `inode`.  

3. **Сделайте `vagrant destroy` на имеющийся инстанс Ubuntu. Замените содержимое `Vagrantfile`:**  

![img.png](img.png)  
![img_1.png](img_1.png)  

4. **Используя `fdisk`, разбейте первый диск на 2 раздела: 2 Гб и оставшееся пространство.**  

![img_2.png](img_2.png)  
![img_3.png](img_3.png)

5. **Используя `sfdisk`, перенесите данную таблицу разделов на второй диск.**  

![img_4.png](img_4.png)  
![img_5.png](img_5.png)  

6. **Соберите `mdadm` RAID1 на паре разделов 2 Гб:**  

![img_6.png](img_6.png)  

7. **Соберите `mdadm` RAID0 на второй паре маленьких разделов:**  

![img_7.png](img_7.png)  

8. **Создайте 2 независимых PV(physical volume) на получившихся md-устройствах.**  

![img_8.png](img_8.png)  

9. **Создайте общую volume-group на этих двух PV:**  

![img_9.png](img_9.png)  

10. **Создайте LV(logical volume) размером 100 Мб, указав его расположение на PV с RAID0.**  

![img_10.png](img_10.png)  

11. **Создайте `mkfs.ext4` ФС на получившемся LV.**  

![img_11.png](img_11.png)  

12. **Смонтируйте этот раздел в любую директорию, например, `/tmp/new`**  

![img_12.png](img_12.png)  

13. **Поместите туда тестовый файл, например** `wget https://mirror.yandex.ru/ubuntu/ls-lR.gz -O /tmp/new/test.gz`  

![img_13.png](img_13.png)  

14. **Прикрепите вывод** `lsblk`  

![img_14.png](img_14.png)  

15. **Протестируйте целостность файла:**  

![img_15.png](img_15.png)  

16. **Используя `pvmove`, переместите содержимое PV с RAID0 на RAID1:**  

![img_16.png](img_16.png)  

17. **Сделайте `--fail` на устройство в вашем RAID1 md:**  

![img_17.png](img_17.png)  

18. **Подтвердите выводом `dmesg`, что RAID1 работает в деградированном состоянии:**  

![img_18.png](img_18.png)  

19. **Протестируйте целостность файла, несмотря на "сбойный" диск он должен продолжать быть доступен:**  

![img_19.png](img_19.png)  

20. **Погасите тестовый хост — `vagrant destroy`.**  

![img_20.png](img_20.png)